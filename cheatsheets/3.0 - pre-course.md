# Rapid Prototyping with Ruby on Rails: pre-course

tealeaf academy

cheatsheet


## setup

### Postgres stuff

- some helpful commands when working with postgres:
- `\l` list all databases
- `\du` list all users
- `\q` quit
- `drop database db_name;` to delete a database
- `create database db_name;` to set up a new database with the current user as owner
- `drop user user_name;` or `drop role user_name;` to delete a user
- `create user user_name:` to setup a new user
- `grant all privileges on database db_name to user_name;`
- on ubuntu, there is by default a root user defined but defined cannot login, if you have to become user postgres, use `sudo su - postgres`
- when peer-authentication fails on your local machine, turn it to md5-authentication in the host-based-authentication (hba) file: open (my current installations) `/etc/postgresql/9.3/main/pg_hba.conf`, go to the end of the file and change the authentication method for users trying to log in from localhost: `local all all md5`


### git basics revisited

- from the github training youtube channel
- git has a very small footprint and hence works well with small bandwidths
- git is composable, it is actually build of a suite of small tools that can be orchestrated using shell scripts
- for installment, it would be enough to but the binaries on your $PATH, no registry entries requiered
- creating a repository now starts locally, you don't have to ask a priviliged administrator to set up a repository for you anymore
- create a repo: `git init` or `git init my_project` to create a corresponding subfolder
- to ungit a directory, it is sufficient to simply remove the .git repository
- there is `http://teach.github.com` that has a range of materials
- to push a new branch, you can say `git push -u origin new_feature_branch`
- to contribute to an existing repository, fork it, create a new branch, work on it, push the branch, and create a pull-request so someone can merge the branch, or have a discussion before merging (or closing)
- change the remote address for the repo with `git remote set-url origin git@github.com:user_name/project_name.git`


### haml things

- helpful website: www.htmltohaml.com, which offers a converter
- also good overview: learn.shayhowe.com/advanced-html-css/preprocessors/
- when the haml-gem is installed, you can preprocess haml to html manually with `haml index.haml index.html`
- `!!!` declare doctype html 5
- content can be written on the same line as the tag like `%h1 hello, work!`
- attributes can be added with {} and Ruby-hash syntax, e.g. `%section{ some: 'value' }`, or with () and html syntax, e.g. `%section(some="value")`
- also, Ruby code can be put on the same single line: `.item{ some: 'value' }= @item.text`
- classes and ids can be defined with `.` and `#` notation
- boolean values can simply be `true` or `false` as in Ruby
- the backslash will escape the following character, so `\= @post` will be printed as `= @post`, not being processed as Ruby but simply read as a string
- there is a Ruby helper-method for continuing with text on the same line, not introducing spaces, where the output of a block will be inserted before the succeeding text

    %p
      Click this
      = succeed "." do
        %a{ href: '#' } link

- there are a number of ways to comment out text  or blocks of code in haml:

    / this line is regular comment in html
    -# this line will not show up in html
    /
      all the lines nested
      here will not be shown

- conditional comments, e.g. for IE checking, have to be put in brackets

    /[if lt IE 9]
      %script{ src: 'html5shiv.js' }

- Filters can be used to execute code in Haml. Filters start with a colon and code is nested under them, common filters are  `cdata`, `plain`, `javascript`, `ruby`, `markdown` and a number of others
- Ruby interpolation works as expected with the "#{ some-ruby-code }" syntax
- all lines that are not interpreted will be output as plain text, which is true for html-tags as well, so if you don't want to translate html to haml, that's fine
- attribute-hashes can be stretched over multiple lines if they break after a comma
- class- and id-attributes can be defined as arrays, and will be automatically joined by haml




## lesson: The Process of going from Ideas to Products

- a prototype process for (web) applications
- 1. idea
- 2. wireframes (communication, not design) - do multiple versions of them to escape your own ideas; also, people can tell you which parts of which approach they like
- 3. Design (layouts, colors, look & feel) -> .psd
- 4. Slicing (turning the designer's .psd-files into html-mockups)
- 5. Development
- keeping these layers separate allows you to try out a number of different approaches or versions for each step
- common tools for building mockups include *balsamique* and *moqups*


## lesson: The Design to Development Handoff

- when we have the static pages, we can use a ui-controller and corresponding my_app/ui-route like `get '/ui(/:action)', controller: 'ui'` to easily access them
- set up a redirect for the production environment so no one will see the mockups
- get a list of every file in a directory using `Dir.glob('app/views/ui/*.html.haml')` which will return an Enumerable of File-objects (from which you could, e.g. build an index page to display all files as links)
- note that we're using sass, which is even shorter than scss (read up on sass at sass-lang.com)
- you can group sass-rails, coffee-rails and uglifier under the :assets group in the Gemfile
- ? what does pry-nav do?
- read about the handoff process at 'blog.hashrocket.com/posts/managing-design-handoffs-with-the-ui-controller'
- when you start designing, the nav should be empty - only fill it up once you know about the features of the app


## lesson: Building Views from Mockups

- if you have a sliced html-page, start by rebuilding it step by step, starting with the views and create the controllers, models, and routes you need to support this
- when rebuilding, you can rely on copying and pasting to make sure the styles still apply and javascript is still intact


## lesson: seeding data

- helpful for development or for letting clients play around with the app in an early stage
- run `rake db:seed` to put the seeds into the database


## Try jQuery tutorial

- common jQuery tasks:
- finding elements on a page
  - every webbrowser has a slightly different javascript interface: jQuery takes care of the differences so the same code will run in every browser
  - to find elements, use `jQuery('h1');` or `$('h1');` - but be careful, in jQuery's *safe-mode* the $ will not be available
  - jQuery will return a list of all elements that match a query-specification
  - selection can happen by id (`$('#container')`) or by class (`$('.highlight')`)

- changing their html-content
  - retrieve content via, e.g. `$('h1').text();` and modify it with `$('h1').text('an even more important headline');`
  - be careful that js-events that change the page do not fire until the page is loaded

- listening to events and reacting accordingly
  - we can listen to document-events like `jQuery(document).ready(function () { ... });`

- animating content on a page and talking over the network to get new content






## stuff

- in Rails 4, scopes need a callable object, so e.g. `has_many :videos, order: :name` now becomes `has_many :videos, ->{ order(:name) }`
- specify a ruby version in a file named `.ruby-version` and rvm will automatically switch to the correct version (simply put e.g. `2.1.2` inside the file)
- and similarly for associating a particular gemset with a project, create a `.ruby-gemset` file and just put the name in there, like `this_special_project`



